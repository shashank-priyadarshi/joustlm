# Database Schema Documentation

This directory contains the database schema definitions for the JoustLM LLM Knowledge Extractor application, focused exclusively on LLM text analysis functionality.

## Core Models

### Analysis (Primary Model)
The `Analysis` model represents the core functionality of the LLM text analysis system, aligning with the assignment requirements:

- **ID**: UUID primary key
- **UserID**: Foreign key to users table
- **Text**: Original unstructured text input
- **Title**: Extracted title (if available)
- **Summary**: 1-2 sentence summary generated by LLM
- **Topics**: JSON array of 3 key topics extracted by LLM
- **Sentiment**: Sentiment analysis result (positive/neutral/negative)
- **Keywords**: JSON array of 3 most frequent nouns (custom implementation)
- **Confidence**: Confidence score for the analysis
- **CreatedAt/UpdatedAt**: Timestamps

### User
User authentication and management:
- **ID**: UUID primary key
- **Username**: Unique username
- **PasswordHash**: Hashed password
- **SessionID**: JWT session management
- **CreatedAt/UpdatedAt**: Timestamps

## Database Migrations

The migration system supports only LLM-related functionality:
1. **001_create_users_table**: User authentication for API access
2. **002_create_analyses_table**: Core LLM analysis functionality

## Assignment Alignment

The schema is designed to support the core assignment requirements:
- ✅ Text input processing
- ✅ LLM-generated summaries
- ✅ Structured metadata extraction (title, topics, sentiment)
- ✅ Custom keyword extraction (3 most frequent nouns)
- ✅ Data persistence in SQLite
- ✅ User authentication for API access
- ✅ Search functionality by topic/keyword

## Indexes

Optimized indexes for LLM text analysis:
- User lookups (username, session_id)
- Analysis queries (user_id, created_at, sentiment, topics, keywords)
- Search optimization (topics, keywords for efficient filtering)
